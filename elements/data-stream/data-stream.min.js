class DataStream extends EnigmaticElement{eventSource=null;constructor(){super()}async connectedCallback(){const a=this.hasAttribute("wait");a||(await this.main())}async main(){await window.ready(),this.fetch()}async fetch(){const a=this.getAttribute("href")||Error("Data stream needs a href"),b=this.getAttribute("target")||Error("Data stream needs a target");this.eventSource=new EventSource(a),this.eventSource.onmessage=a=>{let c=a.data;try{c=JSON.parse(c)}catch(a){}console.log(c),data.set(b,c)}}}customElements.define("data-stream",DataStream);
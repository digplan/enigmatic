class DataSource extends EnigmaticElement{constructor(){super()}async connectedCallback(){const a=this.hasAttribute("wait");a||(await this.main())}async main(){await window.ready(),this.fetch()}async fetch(){const a=this.getAttribute("href");if(!a)return;const b=this.getAttribute("target");let c;c=this.hasAttribute("cache")?await this.cache(a):await(await fetch(a)).json(),b&&window.data.set(this.getAttribute("target"),c)}async cache(a){const b=localStorage.getItem(a);if(b)return JSON.parse(b);const c=await(await fetch(a)).json();return localStorage.setItem(a,JSON.stringify(c)),c}}customElements.define("data-source",DataSource);